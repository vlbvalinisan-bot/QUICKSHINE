<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUICK-SHINE - Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #c7c7c7; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #a0a0a0; }

        /* Print Styles - Completely Separate */
        @media print {
            @page { margin: 20px; }
            body { background: white; }
            
            /* Hide everything by default */
            body > * {
                display: none !important;
            }
            
            /* Only show the specific print area that is active */
            #print-area.active,
            #print-5thgear-area.active {
                display: block !important;
                visibility: visible !important;
                position: static !important;
                width: 100% !important;
                padding: 0 !important;
                margin: 0 !important;
            }
            
            #print-area.active *,
            #print-5thgear-area.active * {
                visibility: visible !important;
            }
        }

        /* Screen styles */
        @media screen {
            #print-area, #print-5thgear-area {
                display: none;
                position: absolute;
                left: -9999px;
            }
        }

        /* Chart Animations */
        .bar-fill { transition: width 1s ease-out; }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #1e293b;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }
        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .modal.active {
            display: flex;
        }
        .modal-content {
            background: white;
            padding: 24px;
            border-radius: 16px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
    </style>
</head>
<body class="text-slate-800 h-screen flex overflow-hidden">

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Payment Update Modal -->
    <div id="paymentModal" class="modal no-print">
        <div class="modal-content">
            <h3 class="text-xl font-bold mb-4">Update Payment Method</h3>
            <p class="text-sm text-slate-600 mb-4">Update payment method for record</p>
            <div class="mb-4">
                <label class="block text-sm font-semibold mb-2">Select Payment Method:</label>
                <select id="updatePaymentSelect" class="w-full p-3 border rounded-lg">
                    <option value="Cash">Cash</option>
                    <option value="Credit Card">Credit Card</option>
                    <option value="Debit Card">Debit Card</option>
                    <option value="Online Transfer">Online Transfer</option>
                    <option value="5th Gear">5th Gear</option>
                </select>
            </div>
            <div class="flex gap-3">
                <button onclick="closePaymentModal()" class="flex-1 py-2 border rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="confirmPaymentUpdate()" class="flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Update</button>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <aside class="w-64 bg-slate-900 text-white flex flex-col shadow-2xl z-20 hidden md:flex no-print">
        <div class="p-6 flex items-center gap-3 border-b border-slate-700">
            <div class="w-10 h-10 rounded-lg bg-blue-500 flex items-center justify-center text-xl">
                <i class="fa-solid fa-car-burst"></i>
            </div>
            <div>
                <h1 class="font-bold text-lg tracking-tight">QUICK-SHINE</h1>
                <p class="text-xs text-slate-400">Management System</p>
            </div>
        </div>

        <nav class="flex-1 p-4 space-y-2">
            <button onclick="switchTab('entry')" id="nav-entry" class="nav-btn w-full flex items-center gap-3 px-4 py-3 rounded-lg bg-blue-600 text-white transition-all hover:bg-blue-500">
                <i class="fa-solid fa-plus-circle"></i> New Entry
            </button>
            <button onclick="switchTab('records')" id="nav-records" class="nav-btn w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 transition-all">
                <i class="fa-solid fa-list-ul"></i> All Records
            </button>
            <button onclick="printDailyReportOnly()" class="nav-btn w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 transition-all">
                <i class="fa-solid fa-print"></i> Daily Report
            </button>
        </nav>

        <!-- Admin Link Separator -->
        <div class="px-4 py-2">
            <p class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2">Configuration</p>
            <button onclick="switchTab('admin')" id="nav-admin" class="nav-btn w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 transition-all">
                <i class="fa-solid fa-chart-pie"></i> Admin & Reports
            </button>
        </div>

        <div class="p-4 border-t border-slate-700 mt-auto">
            <div class="bg-slate-800 rounded-lg p-4">
                <p class="text-xs text-slate-400 mb-1">Total Revenue (Visible)</p>
                <h3 class="text-xl font-bold text-green-400" id="sidebar-total">AED 0.00</h3>
            </div>
            <button onclick="exportData()" class="w-full mt-3 bg-slate-700 hover:bg-slate-600 text-xs text-white py-2 rounded-lg transition-colors flex items-center justify-center gap-2">
                <i class="fa-solid fa-download"></i> Backup Data
            </button>
            <button onclick="document.getElementById('importFile').click()" class="w-full mt-2 bg-slate-700 hover:bg-slate-600 text-xs text-white py-2 rounded-lg transition-colors flex items-center justify-center gap-2">
                <i class="fa-solid fa-upload"></i> Restore Data
            </button>
            <input type="file" id="importFile" accept=".json" onchange="importData(this)" class="hidden">
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col h-full overflow-hidden relative">
        <!-- Mobile Header -->
        <header class="md:hidden bg-slate-900 text-white p-4 flex justify-between items-center shadow-md no-print">
            <span class="font-bold text-lg">QUICK-SHINE</span>
            <button onclick="document.querySelector('aside').classList.toggle('hidden'); document.querySelector('aside').classList.toggle('absolute'); document.querySelector('aside').classList.toggle('h-full');" class="text-white">
                <i class="fa-solid fa-bars"></i>
            </button>
        </header>

        <!-- Content Container -->
        <div class="flex-1 overflow-y-auto p-4 md:p-8 relative">

            <!-- VIEW: NEW ENTRY -->
            <div id="view-entry" class="max-w-4xl mx-auto fade-in">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-800">New Wash Entry</h2>
                    <p class="text-slate-500">Record a new car wash service.</p>
                </div>

                <div class="glass-panel bg-white rounded-2xl shadow-xl p-6 md:p-8 border border-slate-100">
                    <form id="washForm" onsubmit="handleSubmit(event)" class="grid grid-cols-1 md:grid-cols-2 gap-6">

                        <!-- Date -->
                        <div class="space-y-2">
                            <label class="text-sm font-semibold text-slate-600">Date</label>
                            <div class="relative">
                                <i class="fa-regular fa-calendar absolute left-3 top-3.5 text-slate-400"></i>
                                <input type="date" id="inputDate" required class="w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all">
                            </div>
                        </div>

                        <!-- Plate Number -->
                        <div class="space-y-2">
                            <label class="text-sm font-semibold text-slate-600">Plate Number</label>
                            <div class="relative">
                                <i class="fa-solid fa-hashtag absolute left-3 top-3.5 text-slate-400"></i>
                                <input type="text" id="inputPlate" placeholder="e.g. ABC-1234" required class="w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all uppercase">
                            </div>
                        </div>

                        <!-- Location (Dynamic) -->
                        <div class="space-y-2">
                            <label class="text-sm font-semibold text-slate-600 flex justify-between">
                                <span>Location / Bay</span>
                                <span class="text-xs text-blue-500 cursor-pointer" onclick="switchTab('admin')">Edit List</span>
                            </label>
                            <div class="relative">
                                <i class="fa-solid fa-location-dot absolute left-3 top-3.5 text-slate-400"></i>
                                <select id="inputLocation" class="w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all bg-white">
                                    <!-- Populated by JS -->
                                </select>
                            </div>
                        </div>

                        <!-- Cleaner Name (Dynamic) -->
                        <div class="space-y-2">
                            <label class="text-sm font-semibold text-slate-600 flex justify-between">
                                <span>Cleaner Name</span>
                                <span class="text-xs text-blue-500 cursor-pointer" onclick="switchTab('admin')">Edit List</span>
                            </label>
                            <div class="relative">
                                <i class="fa-solid fa-user absolute left-3 top-3.5 text-slate-400"></i>
                                <select id="inputCleaner" class="w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all bg-white">
                                    <!-- Populated by JS -->
                                </select>
                            </div>
                        </div>

                        <!-- Amount -->
                        <div class="space-y-2">
                            <label class="text-sm font-semibold text-slate-600">Amount (AED)</label>
                            <div class="relative">
                                <span class="absolute left-3 top-3.5 text-slate-400 font-bold text-sm">AED</span>
                                <input type="number" id="inputAmount" placeholder="0.00" min="0" step="0.01" required class="w-full pl-14 pr-4 py-3 rounded-lg border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all">
                            </div>
                        </div>

                        <!-- Payment Mode -->
                        <div class="space-y-2">
                            <label class="text-sm font-semibold text-slate-600">Payment Mode</label>
                            <div class="relative">
                                <i class="fa-solid fa-credit-card absolute left-3 top-3.5 text-slate-400"></i>
                                <select id="inputPayment" class="w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all bg-white">
                                    <option value="Cash">Cash</option>
                                    <option value="Credit Card">Credit Card</option>
                                    <option value="Debit Card">Debit Card</option>
                                    <option value="Online Transfer">Online Transfer</option>
                                    <option value="5th Gear">5th Gear</option>
                                    <option value="Pending">Pending (Pay Later)</option>
                                </select>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="md:col-span-2 pt-4">
                            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-200 transition-all transform hover:-translate-y-1 flex justify-center items-center gap-2">
                                <i class="fa-solid fa-check-circle"></i> Submit Record
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- VIEW: ALL RECORDS -->
            <div id="view-records" class="hidden fade-in h-full flex flex-col">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
                    <div>
                        <h2 class="text-3xl font-bold text-slate-800">Wash Records</h2>
                        <p class="text-slate-500">Manage and filter all transactions.</p>
                    </div>
                    <div class="flex gap-3">
                        <button onclick="switchTab('entry')" class="bg-white border border-slate-300 text-slate-700 px-4 py-2 rounded-lg hover:bg-slate-50 font-medium transition-colors">
                            <i class="fa-solid fa-plus mr-2"></i> New Entry
                        </button>
                        <button onclick="printDailyReportOnly()" class="bg-slate-800 text-white px-4 py-2 rounded-lg hover:bg-slate-700 font-medium transition-colors shadow-lg">
                            <i class="fa-solid fa-print mr-2"></i> Daily Report
                        </button>
                    </div>
                </div>

                <!-- DAILY SUMMARY DASHBOARD -->
                <div id="daily-summary" class="hidden mb-6 bg-gradient-to-r from-slate-800 to-slate-900 rounded-2xl p-6 text-white shadow-xl">
                    <div class="flex justify-between items-center mb-4 border-b border-slate-700 pb-4">
                        <div>
                            <h3 class="text-xl font-bold text-emerald-400">Daily Summary</h3>
                            <p class="text-slate-400 text-sm" id="summary-date-label">For: Selected Date</p>
                        </div>
                        <div class="text-right">
                            <p class="text-xs text-slate-400 uppercase">Total Transactions</p>
                            <p class="text-2xl font-bold" id="summary-count">0</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                        <!-- Cash -->
                        <div class="bg-white/10 rounded-xl p-4 backdrop-blur-sm border border-white/10">
                            <div class="flex items-center gap-2 mb-2 text-emerald-400">
                                <i class="fa-solid fa-money-bill-wave"></i>
                                <span class="text-xs font-bold uppercase">Cash</span>
                            </div>
                            <p class="text-xl font-bold" id="daily-cash">AED 0.00</p>
                        </div>

                        <!-- Card -->
                        <div class="bg-white/10 rounded-xl p-4 backdrop-blur-sm border border-white/10">
                            <div class="flex items-center gap-2 mb-2 text-blue-400">
                                <i class="fa-solid fa-credit-card"></i>
                                <span class="text-xs font-bold uppercase">Card</span>
                            </div>
                            <p class="text-xl font-bold" id="daily-card">AED 0.00</p>
                        </div>

                        <!-- Online -->
                        <div class="bg-white/10 rounded-xl p-4 backdrop-blur-sm border border-white/10">
                            <div class="flex items-center gap-2 mb-2 text-purple-400">
                                <i class="fa-solid fa-mobile-screen"></i>
                                <span class="text-xs font-bold uppercase">Online</span>
                            </div>
                            <p class="text-xl font-bold" id="daily-online">AED 0.00</p>
                        </div>

                        <!-- 5th Gear -->
                        <div class="bg-white/10 rounded-xl p-4 backdrop-blur-sm border border-white/10">
                            <div class="flex items-center gap-2 mb-2 text-orange-400">
                                <i class="fa-solid fa-gear"></i>
                                <span class="text-xs font-bold uppercase">5th Gear</span>
                            </div>
                            <p class="text-xl font-bold" id="daily-5thgear">AED 0.00</p>
                        </div>

                        <!-- Pending -->
                        <div class="bg-white/10 rounded-xl p-4 backdrop-blur-sm border border-white/10">
                            <div class="flex items-center gap-2 mb-2 text-amber-400">
                                <i class="fa-solid fa-clock"></i>
                                <span class="text-xs font-bold uppercase">Pending</span>
                            </div>
                            <p class="text-xl font-bold" id="daily-pending">AED 0.00</p>
                        </div>

                        <!-- Grand Total -->
                        <div class="bg-emerald-500/20 rounded-xl p-4 backdrop-blur-sm border border-emerald-500/30 md:col-span-1 col-span-2">
                            <div class="flex items-center gap-2 mb-2 text-emerald-300">
                                <i class="fa-solid fa-calculator"></i>
                                <span class="text-xs font-bold uppercase">Grand Total</span>
                            </div>
                            <p class="text-2xl font-bold text-emerald-300" id="daily-total">AED 0.00</p>
                        </div>
                    </div>
                </div>

                <!-- Filters -->
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200 mb-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="relative">
                        <i class="fa-solid fa-calendar absolute left-3 top-3 text-slate-400"></i>
                        <input type="date" id="filterDate" onchange="renderTable()" class="w-full pl-10 pr-4 py-2 rounded-lg border border-slate-200 focus:border-blue-500 outline-none">
                    </div>
                    <div class="relative">
                        <i class="fa-solid fa-search absolute left-3 top-3 text-slate-400"></i>
                        <input type="text" id="filterPlate" onkeyup="renderTable()" placeholder="Search Plate Number..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-slate-200 focus:border-blue-500 outline-none uppercase">
                    </div>
                    <div class="flex items-center gap-2 text-sm text-slate-600 bg-slate-50 px-4 rounded-lg border border-slate-200">
                        <span class="font-semibold">Total Filtered:</span>
                        <span id="filtered-total" class="text-blue-600 font-bold text-lg">AED 0.00</span>
                    </div>
                </div>

                <!-- Table -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 flex-1 overflow-hidden flex flex-col">
                    <div class="overflow-x-auto flex-1">
                        <table class="w-full text-left border-collapse">
                            <thead class="bg-slate-50 sticky top-0 z-10">
                                <tr>
                                    <th class="p-4 text-xs font-bold text-slate-500 uppercase tracking-wider border-b">Date</th>
                                    <th class="p-4 text-xs font-bold text-slate-500 uppercase tracking-wider border-b">Plate No.</th>
                                    <th class="p-4 text-xs font-bold text-slate-500 uppercase tracking-wider border-b">Location</th>
                                    <th class="p-4 text-xs font-bold text-slate-500 uppercase tracking-wider border-b">Cleaner</th>
                                    <th class="p-4 text-xs font-bold text-slate-500 uppercase tracking-wider border-b">Amount</th>
                                    <th class="p-4 text-xs font-bold text-slate-500 uppercase tracking-wider border-b">Payment</th>
                                    <th class="p-4 text-xs font-bold text-slate-500 uppercase tracking-wider border-b">Status</th>
                                    <th class="p-4 text-xs font-bold text-slate-500 uppercase tracking-wider border-b text-right">Action</th>
                                </tr>
                            </thead>
                            <tbody id="recordsTableBody" class="divide-y divide-slate-100">
                                <!-- Rows generated by JS -->
                            </tbody>
                        </table>
                    </div>
                    <!-- Empty State -->
                    <div id="emptyState" class="hidden flex-col items-center justify-center p-12 text-slate-400">
                        <i class="fa-regular fa-folder-open text-5xl mb-4"></i>
                        <p>No records found. Add your first entry!</p>
                        <button onclick="switchTab('entry')" class="mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            <i class="fa-solid fa-plus mr-2"></i> New Entry
                        </button>
                    </div>
                </div>
            </div>

            <!-- VIEW: ADMIN DASHBOARD -->
            <div id="view-admin" class="hidden fade-in max-w-6xl mx-auto space-y-8">

                <!-- Header -->
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                    <div>
                        <h2 class="text-3xl font-bold text-slate-800">Admin & Reports</h2>
                        <p class="text-slate-500">Manage configuration and view financial analytics.</p>
                    </div>
                    <div class="bg-indigo-100 text-indigo-800 px-4 py-2 rounded-lg text-sm font-semibold flex items-center gap-2">
                        <i class="fa-solid fa-shield-halved"></i> Admin Mode
                    </div>
                </div>

                <!-- Data Management -->
                <div class="bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden">
                    <div class="bg-slate-800 p-6 text-white">
                        <h3 class="text-xl font-bold"><i class="fa-solid fa-database mr-2"></i> Data Management</h3>
                        <p class="text-slate-300 text-sm mt-1">Backup or restore your data</p>
                    </div>
                    <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-slate-50 p-4 rounded-xl border border-slate-200">
                            <h4 class="font-bold text-slate-700 mb-2">Backup Data</h4>
                            <p class="text-sm text-slate-500 mb-4">Download all your records, cleaners, and locations as a JSON file.</p>
                            <button onclick="exportData()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition-colors flex items-center justify-center gap-2">
                                <i class="fa-solid fa-download"></i> Download Backup
                            </button>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-xl border border-slate-200">
                            <h4 class="font-bold text-slate-700 mb-2">Restore Data</h4>
                            <p class="text-sm text-slate-500 mb-4">Upload a previously saved JSON backup file.</p>
                            <button onclick="document.getElementById('restoreFile').click()" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg transition-colors flex items-center justify-center gap-2">
                                <i class="fa-solid fa-upload"></i> Upload Backup
                            </button>
                            <input type="file" id="restoreFile" accept=".json" onchange="importData(this)" class="hidden">
                        </div>
                    </div>
                </div>

                <!-- CLEANER PERFORMANCE DASHBOARD -->
                <div class="bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden">
                    <div class="bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white">
                        <div class="flex justify-between items-center">
                            <div>
                                <h3 class="text-xl font-bold"><i class="fa-solid fa-users mr-2"></i> Cleaner Performance Report</h3>
                                <p class="text-blue-100 text-sm mt-1">Track washes and pending amounts by cleaner</p>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="month" id="cleanerReportMonth" onchange="generateCleanerReport()" class="bg-white/20 text-white px-3 py-2 rounded-lg outline-none border border-white/30">
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <!-- Summary Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="bg-emerald-50 border border-emerald-200 rounded-xl p-4">
                                <div class="flex items-center gap-3">
                                    <div class="w-12 h-12 rounded-full bg-emerald-500 text-white flex items-center justify-center text-xl">
                                        <i class="fa-solid fa-car"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm text-emerald-600 font-semibold">Total Washes</p>
                                        <p class="text-2xl font-bold text-slate-800" id="perf-total-washes">0</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
                                <div class="flex items-center gap-3">
                                    <div class="w-12 h-12 rounded-full bg-blue-500 text-white flex items-center justify-center text-xl">
                                        <i class="fa-solid fa-check-circle"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm text-blue-600 font-semibold">Completed Washes</p>
                                        <p class="text-2xl font-bold text-slate-800" id="perf-completed-washes">0</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-amber-50 border border-amber-200 rounded-xl p-4">
                                <div class="flex items-center gap-3">
                                    <div class="w-12 h-12 rounded-full bg-amber-500 text-white flex items-center justify-center text-xl">
                                        <i class="fa-solid fa-clock"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm text-amber-600 font-semibold">Pending Cars</p>
                                        <p class="text-2xl font-bold text-slate-800" id="perf-pending-count">0</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Cleaner Details Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full text-left border-collapse">
                                <thead class="bg-slate-50">
                                    <tr>
                                        <th class="p-4 text-xs font-bold text-slate-500 uppercase border-b">Cleaner</th>
                                        <th class="p-4 text-xs font-bold text-slate-500 uppercase border-b text-center">Total Washes</th>
                                        <th class="p-4 text-xs font-bold text-slate-500 uppercase border-b text-center">Regular Washes<br><span class="text-xs font-normal text-slate-400">(Excl. 5th Gear)</span></th>
                                        <th class="p-4 text-xs font-bold text-slate-500 uppercase border-b text-center">5th Gear</th>
                                        <th class="p-4 text-xs font-bold text-slate-500 uppercase border-b text-center">Pending Cars</th>
                                        <th class="p-4 text-xs font-bold text-slate-500 uppercase border-b text-right">Pending Amount</th>
                                    </tr>
                                </thead>
                                <tbody id="cleaner-performance-body" class="divide-y divide-slate-100">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- CONFIGURATION SECTION -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Manage Cleaners -->
                    <div class="bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden">
                        <div class="bg-slate-50 p-6 border-b border-slate-200 flex justify-between items-center">
                            <h3 class="text-xl font-bold text-slate-800"><i class="fa-solid fa-users-gear mr-2 text-blue-500"></i> Cleaners</h3>
                            <span class="bg-blue-100 text-blue-700 text-xs font-bold px-2 py-1 rounded-full" id="cleaner-count">0</span>
                        </div>
                        <div class="p-6">
                            <div class="flex gap-2 mb-6">
                                <input type="text" id="newCleanerInput" placeholder="Enter cleaner name..." class="flex-1 px-4 py-2 rounded-lg border border-slate-300 focus:border-blue-500 outline-none">
                                <button onclick="addCleaner()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                                    <i class="fa-solid fa-plus"></i> Add
                                </button>
                            </div>
                            <div class="space-y-2 max-h-48 overflow-y-auto pr-2" id="cleanersList">
                                <!-- Cleaner Items -->
                            </div>
                        </div>
                    </div>

                    <!-- Manage Locations -->
                    <div class="bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden">
                        <div class="bg-slate-50 p-6 border-b border-slate-200 flex justify-between items-center">
                            <h3 class="text-xl font-bold text-slate-800"><i class="fa-solid fa-map-location-dot mr-2 text-green-500"></i> Locations / Bays</h3>
                            <span class="bg-green-100 text-green-700 text-xs font-bold px-2 py-1 rounded-full" id="location-count">0</span>
                        </div>
                        <div class="p-6">
                            <div class="flex gap-2 mb-6">
                                <input type="text" id="newLocationInput" placeholder="Enter location name..." class="flex-1 px-4 py-2 rounded-lg border border-slate-300 focus:border-green-500 outline-none">
                                <button onclick="addLocation()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                                    <i class="fa-solid fa-plus"></i> Add
                                </button>
                            </div>
                            <div class="space-y-2 max-h-48 overflow-y-auto pr-2" id="locationsList">
                                <!-- Location Items -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- MONTHLY FINANCIAL REPORT SECTION -->
                <div class="bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden">
                    <div class="bg-slate-800 p-6 text-white flex flex-col md:flex-row justify-between items-center gap-4">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-white/20 flex items-center justify-center">
                                <i class="fa-solid fa-chart-column text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold">Monthly Financial Report</h3>
                                <p class="text-slate-300 text-sm">Revenue breakdown by payment method</p>
                            </div>
                        </div>

                        <!-- Month Selector -->
                        <div class="flex items-center gap-2 bg-slate-700 p-1 rounded-lg">
                            <input type="month" id="reportMonth" onchange="generateMonthlyReport()" class="bg-transparent text-white px-3 py-2 outline-none font-medium">
                        </div>
                    </div>

                    <div class="p-6 md:p-8">
                        <!-- Print Buttons - SEPARATE -->
                        <div class="flex gap-3 mb-6">
                            <button onclick="printMonthlyReport()" class="bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2">
                                <i class="fa-solid fa-print"></i> Print Monthly Report
                            </button>
                            <button onclick="print5thGearInvoiceOnly()" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2">
                                <i class="fa-solid fa-file-invoice"></i> Print 5th Gear Invoice Only
                            </button>
                        </div>

                        <!-- Stats Grid -->
                        <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-8">
                            <!-- Cash -->
                            <div class="bg-emerald-50 border border-emerald-100 rounded-xl p-4 relative overflow-hidden">
                                <div class="absolute right-0 top-0 p-4 opacity-10">
                                    <i class="fa-solid fa-money-bill-wave text-6xl text-emerald-600"></i>
                                </div>
                                <p class="text-emerald-600 text-sm font-bold uppercase mb-1">Cash</p>
                                <h4 class="text-2xl font-bold text-slate-800" id="stat-cash">AED 0.00</h4>
                                <div class="mt-2 w-full bg-emerald-200 h-1.5 rounded-full overflow-hidden">
                                    <div id="bar-cash" class="bg-emerald-500 h-full bar-fill" style="width: 0%"></div>
                                </div>
                            </div>

                            <!-- Card -->
                            <div class="bg-blue-50 border border-blue-100 rounded-xl p-4 relative overflow-hidden">
                                <div class="absolute right-0 top-0 p-4 opacity-10">
                                    <i class="fa-solid fa-credit-card text-6xl text-blue-600"></i>
                                </div>
                                <p class="text-blue-600 text-sm font-bold uppercase mb-1">Card</p>
                                <h4 class="text-2xl font-bold text-slate-800" id="stat-card">AED 0.00</h4>
                                <div class="mt-2 w-full bg-blue-200 h-1.5 rounded-full overflow-hidden">
                                    <div id="bar-card" class="bg-blue-500 h-full bar-fill" style="width: 0%"></div>
                                </div>
                            </div>

                            <!-- Online -->
                            <div class="bg-purple-50 border border-purple-100 rounded-xl p-4 relative overflow-hidden">
                                <div class="absolute right-0 top-0 p-4 opacity-10">
                                    <i class="fa-solid fa-mobile-screen text-6xl text-purple-600"></i>
                                </div>
                                <p class="text-purple-600 text-sm font-bold uppercase mb-1">Online</p>
                                <h4 class="text-2xl font-bold text-slate-800" id="stat-online">AED 0.00</h4>
                                <div class="mt-2 w-full bg-purple-200 h-1.5 rounded-full overflow-hidden">
                                    <div id="bar-online" class="bg-purple-500 h-full bar-fill" style="width: 0%"></div>
                                </div>
                            </div>

                            <!-- 5th Gear -->
                            <div class="bg-orange-50 border border-orange-100 rounded-xl p-4 relative overflow-hidden">
                                <div class="absolute right-0 top-0 p-4 opacity-10">
                                    <i class="fa-solid fa-gear text-6xl text-orange-600"></i>
                                </div>
                                <p class="text-orange-600 text-sm font-bold uppercase mb-1">5th Gear</p>
                                <h4 class="text-2xl font-bold text-slate-800" id="stat-5thgear">AED 0.00</h4>
                                <div class="mt-2 w-full bg-orange-200 h-1.5 rounded-full overflow-hidden">
                                    <div id="bar-5thgear" class="bg-orange-500 h-full bar-fill" style="width: 0%"></div>
                                </div>
                            </div>

                            <!-- Pending -->
                            <div class="bg-amber-50 border border-amber-100 rounded-xl p-4 relative overflow-hidden">
                                <div class="absolute right-0 top-0 p-4 opacity-10">
                                    <i class="fa-solid fa-clock text-6xl text-amber-600"></i>
                                </div>
                                <p class="text-amber-600 text-sm font-bold uppercase mb-1">Pending</p>
                                <h4 class="text-2xl font-bold text-slate-800" id="stat-pending">AED 0.00</h4>
                                <div class="mt-2 w-full bg-amber-200 h-1.5 rounded-full overflow-hidden">
                                    <div id="bar-pending" class="bg-amber-500 h-full bar-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Summary Bar -->
                        <div class="bg-slate-800 rounded-xl p-6 text-white flex flex-col md:flex-row justify-between items-center gap-4 mb-8">
                            <div>
                                <p class="text-slate-400 text-sm uppercase tracking-wider font-semibold">Total Revenue (Paid)</p>
                                <p class="text-xs text-slate-500">Cash + Card + Online + 5th Gear</p>
                            </div>
                            <div class="text-3xl font-bold text-emerald-400" id="stat-total-paid">AED 0.00</div>
                        </div>

                        <!-- Monthly Records Table -->
                        <div class="border border-slate-200 rounded-xl overflow-hidden">
                            <div class="bg-slate-50 p-4 border-b border-slate-200 font-bold text-slate-700">
                                Transactions for <span id="table-month-label">Selected Month</span>
                            </div>
                            <div class="max-h-64 overflow-y-auto">
                                <table class="w-full text-sm text-left">
                                    <thead class="bg-slate-50 sticky top-0">
                                        <tr>
                                            <th class="p-3 border-b">Date</th>
                                            <th class="p-3 border-b">Plate</th>
                                            <th class="p-3 border-b">Cleaner</th>
                                            <th class="p-3 border-b">Method</th>
                                            <th class="p-3 border-b text-right">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody id="monthly-records-body" class="divide-y divide-slate-100">
                                        <!-- Populated by JS -->
                                    </tbody>
                                </table>
                            </div>
                            <div id="monthly-empty" class="hidden p-8 text-center text-slate-400">
                                No transactions found for this month.
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </main>

    <!-- PRINT AREA 1: DAILY/MONTHLY REPORT ONLY -->
    <div id="print-area" class="bg-white p-8 max-w-4xl mx-auto">
        <!-- Header -->
        <div class="border-b-2 border-slate-800 pb-4 mb-6 flex justify-between items-end">
            <div>
                <h1 class="text-3xl font-bold text-slate-900">Daily Wash Report</h1>
                <p class="text-slate-500 mt-1">QUICK-SHINE Management System</p>
            </div>
            <div class="text-right">
                <p class="font-bold text-lg" id="print-date">Date: --</p>
                <p class="text-sm text-slate-500">Generated on: <span id="print-generated"></span></p>
            </div>
        </div>

        <!-- Summary Section for Print -->
        <div id="print-summary" class="mb-6 bg-slate-50 p-4 rounded-lg border border-slate-200">
            <h3 class="text-lg font-bold text-slate-800 mb-3 border-b border-slate-300 pb-2">Daily Summary</h3>
            <div class="grid grid-cols-3 gap-4 text-sm">
                <div>
                    <span class="text-slate-500">Total Cars:</span>
                    <span class="font-bold text-slate-800 ml-1" id="print-total-cars">0</span>
                </div>
                <div>
                    <span class="text-slate-500">Cash:</span>
                    <span class="font-bold text-emerald-600 ml-1" id="print-cash">AED 0.00</span>
                </div>
                <div>
                    <span class="text-slate-500">Card:</span>
                    <span class="font-bold text-blue-600 ml-1" id="print-card">AED 0.00</span>
                </div>
                <div>
                    <span class="text-slate-500">Online:</span>
                    <span class="font-bold text-purple-600 ml-1" id="print-online">AED 0.00</span>
                </div>
                <div>
                    <span class="text-slate-500">5th Gear:</span>
                    <span class="font-bold text-orange-600 ml-1" id="print-5thgear">AED 0.00</span>
                </div>
                <div>
                    <span class="text-slate-500">Pending:</span>
                    <span class="font-bold text-amber-600 ml-1" id="print-pending">AED 0.00</span>
                </div>
                <div class="col-span-3">
                    <span class="text-slate-500">Grand Total:</span>
                    <span class="font-bold text-slate-900 ml-1 text-lg" id="print-grand-total">AED 0.00</span>
                </div>
            </div>
        </div>

        <!-- Detail Table -->
        <table class="w-full mb-8 text-sm border-collapse">
            <thead>
                <tr class="bg-slate-100 text-left">
                    <th class="p-2 border border-slate-300">Date</th>
                    <th class="p-2 border border-slate-300">Plate</th>
                    <th class="p-2 border border-slate-300">Location</th>
                    <th class="p-2 border border-slate-300">Cleaner</th>
                    <th class="p-2 border border-slate-300">Mode</th>
                    <th class="p-2 border border-slate-300 text-right">Amount</th>
                </tr>
            </thead>
            <tbody id="print-table-body">
                <!-- Print rows -->
            </tbody>
            <tfoot>
                <tr class="font-bold bg-slate-50">
                    <td colspan="5" class="p-2 border border-slate-300 text-right">TOTAL REVENUE:</td>
                    <td class="p-2 border border-slate-300 text-right" id="print-total">AED 0.00</td>
                </tr>
            </tfoot>
        </table>

        <div class="mt-12 grid grid-cols-2 gap-8">
            <div class="border-t border-slate-400 pt-2">
                <p class="text-xs text-slate-500 uppercase">Verified By</p>
            </div>
            <div class="border-t border-slate-400 pt-2 text-right">
                <p class="text-xs text-slate-500 uppercase">Manager Signature</p>
            </div>
        </div>
    </div>

    <!-- PRINT AREA 2: 5TH GEAR INVOICE ONLY -->
    <div id="print-5thgear-area" class="bg-white p-8 max-w-3xl mx-auto">
        <!-- 5th Gear Header -->
        <div class="border-b-4 border-orange-500 pb-6 mb-6">
            <div class="flex justify-between items-start">
                <div>
                    <h1 class="text-4xl font-bold text-orange-600 mb-2">5th Gear</h1>
                    <p class="text-xl text-slate-600 font-semibold">Monthly Invoice</p>
                    <p class="text-slate-500 mt-1">Car Wash Services</p>
                </div>
                <div class="text-right">
                    <div class="w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mb-2 ml-auto">
                        <i class="fa-solid fa-gear text-4xl text-orange-600"></i>
                    </div>
                    <p class="font-bold text-lg text-slate-800" id="print-5thgear-date">Date: --</p>
                </div>
            </div>
        </div>

        <!-- Invoice Details -->
        <div class="bg-orange-50 rounded-xl p-6 mb-6 border border-orange-200">
            <div class="grid grid-cols-2 gap-4 mb-4">
                <div>
                    <p class="text-sm text-slate-600 mb-1">Invoice Period:</p>
                    <p class="font-bold text-slate-800" id="print-5thgear-period">--</p>
                </div>
                <div class="text-right">
                    <p class="text-sm text-slate-600 mb-1">Total 5th Gear Washes:</p>
                    <p class="font-bold text-2xl text-orange-600" id="print-5thgear-count">0</p>
                </div>
            </div>
            <div class="border-t border-orange-200 pt-4 flex justify-between items-center">
                <span class="text-lg font-semibold text-slate-700">Total Amount Due:</span>
                <span class="text-3xl font-bold text-orange-600" id="print-5thgear-total">AED 0.00</span>
            </div>
        </div>

        <!-- 5th Gear Transactions Table -->
        <h3 class="text-lg font-bold text-slate-800 mb-4">Transaction Details</h3>
        <table class="w-full mb-8 text-sm border-collapse">
            <thead>
                <tr class="bg-orange-100 text-left">
                    <th class="p-3 border border-orange-300 font-bold text-slate-700">Date</th>
                    <th class="p-3 border border-orange-300 font-bold text-slate-700">Plate Number</th>
                    <th class="p-3 border border-orange-300 font-bold text-slate-700 text-right">Amount (AED)</th>
                </tr>
            </thead>
            <tbody id="print-5thgear-body">
                <!-- 5th Gear rows -->
            </tbody>
            <tfoot>
                <tr class="font-bold bg-orange-50">
                    <td colspan="2" class="p-3 border border-orange-300 text-right text-slate-700">TOTAL:</td>
                    <td class="p-3 border border-orange-300 text-right text-orange-600 text-lg" id="print-5thgear-table-total">AED 0.00</td>
                </tr>
            </tfoot>
        </table>

        <!-- Payment Instructions -->
        <div class="bg-slate-50 rounded-lg p-4 border border-slate-200 mb-8">
            <h4 class="font-bold text-slate-700 mb-2">Payment Instructions:</h4>
            <p class="text-sm text-slate-600">Please remit payment within 30 days of invoice date. Make checks payable to QUICK-SHINE or transfer to account details provided separately.</p>
        </div>

        <div class="mt-12 pt-8 border-t-2 border-slate-200">
            <div class="grid grid-cols-2 gap-8">
                <div>
                    <p class="text-sm text-slate-500 mb-4">Prepared By:</p>
                    <div class="border-b border-slate-400 pb-2">
                        <p class="font-bold text-slate-700">QUICK-SHINE Management</p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-sm text-slate-500 mb-4">Authorized Signature:</p>
                    <div class="border-b border-slate-400 pb-2 inline-block w-48"></div>
                </div>
            </div>
        </div>

        <div class="mt-8 text-center text-xs text-slate-400">
            <p>This invoice is computer generated and is valid without signature.</p>
            <p class="mt-1">For queries, contact: +971 50 654 7978</p>
        </div>
    </div>

    <script>
        // --- State Management ---
        let records = [];
        let cleaners = ['John Doe', 'Jane Smith'];
        let locations = ['Bay 1 - Main', 'Bay 2 - Side'];
        let currentEditId = null;

        // --- Local Storage Functions ---
        function saveToLocalStorage() {
            const data = {
                records: records,
                cleaners: cleaners,
                locations: locations,
                lastSaved: new Date().toISOString()
            };
            localStorage.setItem('QUICK-SHINE_data', JSON.stringify(data));
            showToast('Data saved to local storage');
        }

        function loadFromLocalStorage() {
            const saved = localStorage.getItem('QUICK-SHINE_data');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    records = data.records || [];
                    cleaners = data.cleaners || cleaners;
                    locations = data.locations || locations;
                    showToast('Data loaded from local storage');
                } catch (e) {
                    console.error('Error loading data:', e);
                }
            }
        }

        function exportData() {
            const data = {
                records: records,
                cleaners: cleaners,
                locations: locations,
                exportDate: new Date().toISOString()
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `QUICK-SHINE_backup_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showToast('Backup downloaded successfully');
        }

        function importData(input) {
            const file = input.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    if (data.records) records = data.records;
                    if (data.cleaners) cleaners = data.cleaners;
                    if (data.locations) locations = data.locations;

                    saveToLocalStorage();
                    renderDropdowns();
                    if (document.getElementById('view-records').classList.contains('hidden') === false) {
                        renderTable();
                    }
                    if (document.getElementById('view-admin').classList.contains('hidden') === false) {
                        renderAdminDashboard();
                        generateMonthlyReport();
                        generateCleanerReport();
                    }
                    showToast('Data restored successfully');
                } catch (err) {
                    alert('Error reading file. Please ensure it is a valid backup file.');
                }
            };
            reader.readAsText(file);
            input.value = '';
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Initialize Date Input to Today
        document.getElementById('inputDate').valueAsDate = new Date();

        // Set default month in report to current month
        document.getElementById('reportMonth').value = new Date().toISOString().slice(0, 7);
        document.getElementById('cleanerReportMonth').value = new Date().toISOString().slice(0, 7);

        // Load data on startup
        loadFromLocalStorage();

        // --- Navigation ---
        function switchTab(tabName) {
            ['entry', 'records', 'admin'].forEach(t => {
                document.getElementById(`view-${t}`).classList.add('hidden');
            });

            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('text-slate-300');
            });

            document.getElementById(`view-${tabName}`).classList.remove('hidden');
            const navBtn = document.getElementById(`nav-${tabName}`);
            if(navBtn) {
                navBtn.classList.remove('text-slate-300');
                navBtn.classList.add('bg-blue-600', 'text-white');
            }

            if(tabName === 'records') renderTable();
            if(tabName === 'admin') {
                renderAdminDashboard();
                generateMonthlyReport();
                generateCleanerReport();
            }
            if(tabName === 'entry') renderDropdowns();
        }

        // --- Payment Update Modal ---
        function openPaymentModal(id) {
            currentEditId = id;
            const rec = records.find(r => r.id === id);
            if (rec) {
                document.getElementById('updatePaymentSelect').value = rec.payment;
                document.getElementById('paymentModal').classList.add('active');
            }
        }

        function closePaymentModal() {
            document.getElementById('paymentModal').classList.remove('active');
            currentEditId = null;
        }

        function confirmPaymentUpdate() {
            if (currentEditId) {
                const rec = records.find(r => r.id === currentEditId);
                if (rec) {
                    const newPayment = document.getElementById('updatePaymentSelect').value;
                    rec.payment = newPayment;
                    rec.status = newPayment === 'Pending' ? 'Pending' : 'Paid';
                    saveToLocalStorage();
                    renderTable();
                    showToast('Payment method updated successfully');
                }
            }
            closePaymentModal();
        }

        // --- Admin Logic ---

        function renderAdminDashboard() {
            const cList = document.getElementById('cleanersList');
            cList.innerHTML = '';
            cleaners.forEach((c, index) => {
                cList.innerHTML += `
                    <div class="flex justify-between items-center p-3 bg-slate-50 rounded-lg border border-slate-100">
                        <span class="font-medium text-slate-700">${c}</span>
                        <button onclick="removeCleaner(${index})" class="text-red-400 hover:text-red-600 transition-colors">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </div>
                `;
            });
            document.getElementById('cleaner-count').innerText = cleaners.length;

            const lList = document.getElementById('locationsList');
            lList.innerHTML = '';
            locations.forEach((l, index) => {
                lList.innerHTML += `
                    <div class="flex justify-between items-center p-3 bg-slate-50 rounded-lg border border-slate-100">
                        <span class="font-medium text-slate-700">${l}</span>
                        <button onclick="removeLocation(${index})" class="text-red-400 hover:text-red-600 transition-colors">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </div>
                `;
            });
            document.getElementById('location-count').innerText = locations.length;
        }

        function addCleaner() {
            const input = document.getElementById('newCleanerInput');
            const val = input.value.trim();
            if(val && !cleaners.includes(val)) {
                cleaners.push(val);
                input.value = '';
                saveToLocalStorage();
                renderAdminDashboard();
            }
        }

        function removeCleaner(index) {
            if(confirm('Remove this cleaner?')) {
                cleaners.splice(index, 1);
                saveToLocalStorage();
                renderAdminDashboard();
            }
        }

        function addLocation() {
            const input = document.getElementById('newLocationInput');
            const val = input.value.trim();
            if(val && !locations.includes(val)) {
                locations.push(val);
                input.value = '';
                saveToLocalStorage();
                renderAdminDashboard();
            }
        }

        function removeLocation(index) {
            if(confirm('Remove this location?')) {
                locations.splice(index, 1);
                saveToLocalStorage();
                renderAdminDashboard();
            }
        }

        // --- Cleaner Performance Report ---
        function generateCleanerReport() {
            const monthInput = document.getElementById('cleanerReportMonth').value;
            if(!monthInput) return;

            const [year, month] = monthInput.split('-');
            
            const monthlyRecords = records.filter(rec => {
                const recDate = new Date(rec.date);
                return recDate.getFullYear() == year && (recDate.getMonth() + 1) == month;
            });

            // Calculate stats
            let totalWashes = 0;
            let completedWashes = 0;
            let pendingCount = 0;
            let cleanerStats = {};

            cleaners.forEach(c => {
                cleanerStats[c] = {
                    total: 0,
                    regular: 0,
                    fifthGear: 0,
                    pendingCount: 0,
                    pendingAmount: 0
                };
            });

            monthlyRecords.forEach(rec => {
                totalWashes++;
                
                if (rec.status === 'Pending' || rec.payment === 'Pending') {
                    pendingCount++;
                } else {
                    completedWashes++;
                }

                if (cleanerStats[rec.cleaner]) {
                    cleanerStats[rec.cleaner].total++;
                    
                    if (rec.payment === '5th Gear') {
                        cleanerStats[rec.cleaner].fifthGear++;
                    } else if (rec.payment !== 'Pending') {
                        cleanerStats[rec.cleaner].regular++;
                    }

                    if (rec.status === 'Pending' || rec.payment === 'Pending') {
                        cleanerStats[rec.cleaner].pendingCount++;
                        cleanerStats[rec.cleaner].pendingAmount += rec.amount;
                    }
                }
            });

            // Update summary cards
            document.getElementById('perf-total-washes').innerText = totalWashes;
            document.getElementById('perf-completed-washes').innerText = completedWashes;
            document.getElementById('perf-pending-count').innerText = pendingCount;

            // Update table
            const tbody = document.getElementById('cleaner-performance-body');
            tbody.innerHTML = '';

            cleaners.forEach(cleaner => {
                const stats = cleanerStats[cleaner];
                if (stats.total > 0) {
                    tbody.innerHTML += `
                        <tr class="hover:bg-slate-50">
                            <td class="p-4 font-medium text-slate-800">${cleaner}</td>
                            <td class="p-4 text-center font-bold text-slate-700">${stats.total}</td>
                            <td class="p-4 text-center text-emerald-600 font-semibold">${stats.regular}</td>
                            <td class="p-4 text-center text-orange-600 font-semibold">${stats.fifthGear}</td>
                            <td class="p-4 text-center">
                                ${stats.pendingCount > 0 
                                    ? `<span class="bg-amber-100 text-amber-700 px-2 py-1 rounded-full text-xs font-bold">${stats.pendingCount}</span>` 
                                    : '<span class="text-slate-400">0</span>'}
                            </td>
                            <td class="p-4 text-right font-bold ${stats.pendingAmount > 0 ? 'text-amber-600' : 'text-slate-400'}">
                                AED ${stats.pendingAmount.toFixed(2)}
                            </td>
                        </tr>
                    `;
                }
            });

            if (tbody.innerHTML === '') {
                tbody.innerHTML = '<tr><td colspan="6" class="p-8 text-center text-slate-400">No records found for this month</td></tr>';
            }
        }

        // --- Monthly Report Logic ---

        function generateMonthlyReport() {
            const monthInput = document.getElementById('reportMonth').value;
            if(!monthInput) return;

            const [year, month] = monthInput.split('-');
            document.getElementById('table-month-label').innerText = new Date(year, month-1).toLocaleDateString('en-US', { month: 'long', year: 'numeric' });

            const monthlyRecords = records.filter(rec => {
                const recDate = new Date(rec.date);
                return recDate.getFullYear() == year && (recDate.getMonth() + 1) == month;
            });

            let stats = { cash: 0, card: 0, online: 0, fifthGear: 0, pending: 0, totalPaid: 0 };
            monthlyRecords.forEach(rec => {
                if(rec.payment === 'Cash') stats.cash += rec.amount;
                else if(rec.payment === 'Credit Card' || rec.payment === 'Debit Card') stats.card += rec.amount;
                else if(rec.payment === 'Online Transfer') stats.online += rec.amount;
                else if(rec.payment === '5th Gear') stats.fifthGear += rec.amount;
                else if(rec.payment === 'Pending' || rec.status === 'Pending') stats.pending += rec.amount;
            });

            stats.totalPaid = stats.cash + stats.card + stats.online + stats.fifthGear;
            const maxVal = Math.max(stats.cash, stats.card, stats.online, stats.fifthGear, stats.pending, 1);

            document.getElementById('stat-cash').innerText = 'AED ' + stats.cash.toFixed(2);
            document.getElementById('bar-cash').style.width = (stats.cash / maxVal * 100) + '%';
            document.getElementById('stat-card').innerText = 'AED ' + stats.card.toFixed(2);
            document.getElementById('bar-card').style.width = (stats.card / maxVal * 100) + '%';
            document.getElementById('stat-online').innerText = 'AED ' + stats.online.toFixed(2);
            document.getElementById('bar-online').style.width = (stats.online / maxVal * 100) + '%';
            document.getElementById('stat-5thgear').innerText = 'AED ' + stats.fifthGear.toFixed(2);
            document.getElementById('bar-5thgear').style.width = (stats.fifthGear / maxVal * 100) + '%';
            document.getElementById('stat-pending').innerText = 'AED ' + stats.pending.toFixed(2);
            document.getElementById('bar-pending').style.width = (stats.pending / maxVal * 100) + '%';
            document.getElementById('stat-total-paid').innerText = 'AED ' + stats.totalPaid.toFixed(2);

            const tbody = document.getElementById('monthly-records-body');
            const emptyState = document.getElementById('monthly-empty');
            tbody.innerHTML = '';

            if(monthlyRecords.length === 0) {
                emptyState.classList.remove('hidden');
            } else {
                emptyState.classList.add('hidden');
                monthlyRecords.sort((a,b) => new Date(a.date) - new Date(b.date));
                monthlyRecords.forEach(rec => {
                    let methodClass = 'text-slate-600';
                    if(rec.payment === 'Cash') methodClass = 'text-emerald-600 font-semibold';
                    if(rec.payment === '5th Gear') methodClass = 'text-orange-600 font-semibold';
                    if(rec.payment === 'Pending') methodClass = 'text-amber-600 font-semibold';
                    tbody.innerHTML += `
                        <tr class="hover:bg-slate-50">
                            <td class="p-3 border-b border-slate-100">${rec.date}</td>
                            <td class="p-3 border-b border-slate-100 font-medium">${rec.plate}</td>
                            <td class="p-3 border-b border-slate-100">${rec.cleaner}</td>
                            <td class="p-3 border-b border-slate-100 ${methodClass}">${rec.payment}</td>
                            <td class="p-3 border-b border-slate-100 text-right font-bold">AED ${rec.amount.toFixed(2)}</td>
                        </tr>
                    `;
                });
            }
        }

        // --- Dropdown Logic ---

        function renderDropdowns() {
            const cSelect = document.getElementById('inputCleaner');
            const lSelect = document.getElementById('inputLocation');
            const currentCleaner = cSelect.value;
            const currentLocation = lSelect.value;

            cSelect.innerHTML = '';
            lSelect.innerHTML = '';

            cleaners.forEach(c => {
                const opt = document.createElement('option');
                opt.value = c;
                opt.innerText = c;
                cSelect.appendChild(opt);
            });

            locations.forEach(l => {
                const opt = document.createElement('option');
                opt.value = l;
                opt.innerText = l;
                lSelect.appendChild(opt);
            });

            if(cleaners.includes(currentCleaner)) cSelect.value = currentCleaner;
            if(locations.includes(currentLocation)) lSelect.value = currentLocation;
        }

        // --- Core Logic ---

        function handleSubmit(e) {
            e.preventDefault();
            const newRecord = {
                id: Date.now(),
                date: document.getElementById('inputDate').value,
                plate: document.getElementById('inputPlate').value.toUpperCase(),
                location: document.getElementById('inputLocation').value,
                cleaner: document.getElementById('inputCleaner').value,
                amount: parseFloat(document.getElementById('inputAmount').value),
                payment: document.getElementById('inputPayment').value,
                status: document.getElementById('inputPayment').value === 'Pending' ? 'Pending' : 'Paid'
            };
            records.unshift(newRecord);
            saveToLocalStorage();
            renderDropdowns();
            showToast('Record Saved Successfully!');
            
            document.getElementById('inputPlate').value = '';
document.getElementById('inputAmount').value = '';
document.getElementById('inputPlate').focus(); // Focus on plate for next entry

showToast('Record Saved Successfully!  Plate: ' + newRecord.plate);
        }

        function renderTable() {
            const tbody = document.getElementById('recordsTableBody');
            const filterDate = document.getElementById('filterDate').value;
            const filterPlate = document.getElementById('filterPlate').value.toUpperCase();
            const emptyState = document.getElementById('emptyState');
            const dailySummary = document.getElementById('daily-summary');

            tbody.innerHTML = '';
            let totalAmount = 0;

            const filteredRecords = records.filter(rec => {
                const matchDate = filterDate ? rec.date === filterDate : true;
                const matchPlate = filterPlate ? rec.plate.includes(filterPlate) : true;
                return matchDate && matchPlate;
            });

            // Handle Daily Summary Display
            if (filterDate) {
                dailySummary.classList.remove('hidden');
                document.getElementById('summary-date-label').innerText = `For: ${new Date(filterDate).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}`;

                // Calculate daily stats
                let dailyStats = { cash: 0, card: 0, online: 0, fifthGear: 0, pending: 0, count: 0 };
                filteredRecords.forEach(rec => {
                    dailyStats.count++;
                    if(rec.payment === 'Cash') dailyStats.cash += rec.amount;
                    else if(rec.payment === 'Credit Card' || rec.payment === 'Debit Card') dailyStats.card += rec.amount;
                    else if(rec.payment === 'Online Transfer') dailyStats.online += rec.amount;
                    else if(rec.payment === '5th Gear') dailyStats.fifthGear += rec.amount;
                    else if(rec.payment === 'Pending') dailyStats.pending += rec.amount;
                });

                document.getElementById('summary-count').innerText = dailyStats.count;
                document.getElementById('daily-cash').innerText = 'AED ' + dailyStats.cash.toFixed(2);
                document.getElementById('daily-card').innerText = 'AED ' + dailyStats.card.toFixed(2);
                document.getElementById('daily-online').innerText = 'AED ' + dailyStats.online.toFixed(2);
                document.getElementById('daily-5thgear').innerText = 'AED ' + dailyStats.fifthGear.toFixed(2);
                document.getElementById('daily-pending').innerText = 'AED ' + dailyStats.pending.toFixed(2);
                document.getElementById('daily-total').innerText = 'AED ' + (dailyStats.cash + dailyStats.card + dailyStats.online + dailyStats.fifthGear).toFixed(2);
            } else {
                dailySummary.classList.add('hidden');
            }

            if (filteredRecords.length === 0) {
                emptyState.classList.remove('hidden');
                emptyState.classList.add('flex');
            } else {
                emptyState.classList.add('hidden');
                emptyState.classList.remove('flex');
            }

            filteredRecords.forEach(rec => {
                totalAmount += rec.amount;
                const tr = document.createElement('tr');
                tr.className = "hover:bg-slate-50 transition-colors group";

                let statusBadge = '';
                let paymentBadge = '';
                
                // Payment method badge
                let paymentColor = 'bg-slate-100 text-slate-700';
                if(rec.payment === 'Cash') paymentColor = 'bg-emerald-100 text-emerald-700';
                else if(rec.payment === '5th Gear') paymentColor = 'bg-orange-100 text-orange-700';
                else if(rec.payment === 'Pending') paymentColor = 'bg-amber-100 text-amber-700';
                else if(rec.payment === 'Credit Card' || rec.payment === 'Debit Card') paymentColor = 'bg-blue-100 text-blue-700';
                else if(rec.payment === 'Online Transfer') paymentColor = 'bg-purple-100 text-purple-700';
                
                paymentBadge = `<span class="px-2 py-1 rounded-full text-xs font-bold ${paymentColor} border">${rec.payment}</span>`;

                if(rec.status === 'Paid') {
                    statusBadge = `<span class="px-2 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700 border border-green-200">Paid</span>`;
                } else {
                    statusBadge = `<span class="px-2 py-1 rounded-full text-xs font-bold bg-yellow-100 text-yellow-700 border border-yellow-200">Pending</span>`;
                }

                // Action buttons
                let actionButtons = `
                    <button onclick="deleteRecord(${rec.id})" class="text-slate-400 hover:text-red-500 transition-colors p-2 rounded-full hover:bg-red-50" title="Delete">
                        <i class="fa-solid fa-trash"></i>
                    </button>
                `;
                
                // Add edit button for pending records
                if(rec.payment === 'Pending' || rec.status === 'Pending') {
                    actionButtons += `
                        <button onclick="openPaymentModal(${rec.id})" class="text-blue-400 hover:text-blue-600 transition-colors p-2 rounded-full hover:bg-blue-50" title="Update Payment">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </button>
                    `;
                }

                tr.innerHTML = `
                    <td class="p-4 text-sm text-slate-600 font-medium">${rec.date}</td>
                    <td class="p-4 text-sm font-bold text-slate-800">${rec.plate}</td>
                    <td class="p-4 text-sm text-slate-600">${rec.location}</td>
                    <td class="p-4 text-sm text-slate-600">
                        <div class="flex items-center gap-2">
                            <div class="w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold">
                                ${rec.cleaner.charAt(0)}
                            </div>
                            ${rec.cleaner}
                        </div>
                    </td>
                    <td class="p-4 text-sm font-bold text-slate-800">AED ${rec.amount.toFixed(2)}</td>
                    <td class="p-4">${paymentBadge}</td>
                    <td class="p-4">${statusBadge}</td>
                    <td class="p-4 text-right flex justify-end gap-1">
                        ${actionButtons}
                    </td>
                `;
                tbody.appendChild(tr);
            });

            document.getElementById('filtered-total').innerText = 'AED ' + totalAmount.toFixed(2);
            document.getElementById('sidebar-total').innerText = 'AED ' + totalAmount.toFixed(2);
        }

        function deleteRecord(id) {
            if(confirm('Are you sure you want to delete this record?')) {
                records = records.filter(r => r.id !== id);
                saveToLocalStorage();
                renderTable();
            }
        }

        // --- SEPARATE PRINT FUNCTIONS ---

        // 1. Daily Report Only - Excludes 5th Gear from summary but includes in total
        function printDailyReportOnly() {
            const filterDate = document.getElementById('filterDate').value;

            // Get records for daily report (ALL records for the date)
            const dataToPrint = records.filter(rec => {
                return filterDate ? rec.date === filterDate : true;
            });

            if(dataToPrint.length === 0) {
                showToast('No records to print');
                return;
            }

            // Calculate stats for print summary
            let printStats = { cash: 0, card: 0, online: 0, fifthGear: 0, pending: 0, count: 0 };
            dataToPrint.forEach(rec => {
                printStats.count++;
                if(rec.payment === 'Cash') printStats.cash += rec.amount;
                else if(rec.payment === 'Credit Card' || rec.payment === 'Debit Card') printStats.card += rec.amount;
                else if(rec.payment === 'Online Transfer') printStats.online += rec.amount;
                else if(rec.payment === '5th Gear') printStats.fifthGear += rec.amount;
                else if(rec.payment === 'Pending') printStats.pending += rec.amount;
            });

            // Populate Print Summary
            document.getElementById('print-total-cars').innerText = printStats.count;
            document.getElementById('print-cash').innerText = 'AED ' + printStats.cash.toFixed(2);
            document.getElementById('print-card').innerText = 'AED ' + printStats.card.toFixed(2);
            document.getElementById('print-online').innerText = 'AED ' + printStats.online.toFixed(2);
            document.getElementById('print-5thgear').innerText = 'AED ' + printStats.fifthGear.toFixed(2);
            document.getElementById('print-pending').innerText = 'AED ' + printStats.pending.toFixed(2);
            document.getElementById('print-grand-total').innerText = 'AED ' + (printStats.cash + printStats.card + printStats.online + printStats.fifthGear).toFixed(2);

            // Populate Header
            document.getElementById('print-generated').innerText = new Date().toLocaleDateString();
            document.getElementById('print-date').innerText = filterDate 
                ? `Report for: ${new Date(filterDate).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}` 
                : `Report for: All Dates`;

            // Populate Table - ALL records including 5th Gear
            const printBody = document.getElementById('print-table-body');
            printBody.innerHTML = '';
            let total = 0;

            dataToPrint.sort((a,b) => new Date(a.date) - new Date(b.date));

            dataToPrint.forEach(rec => {
                total += rec.amount;
                printBody.innerHTML += `
                    <tr>
                        <td class="p-2 border border-slate-300">${rec.date}</td>
                        <td class="p-2 border border-slate-300 font-bold">${rec.plate}</td>
                        <td class="p-2 border border-slate-300">${rec.location}</td>
                        <td class="p-2 border border-slate-300">${rec.cleaner}</td>
                        <td class="p-2 border border-slate-300">${rec.payment}</td>
                        <td class="p-2 border border-slate-300 text-right">AED ${rec.amount.toFixed(2)}</td>
                    </tr>
                `;
            });

            document.getElementById('print-total').innerText = 'AED ' + total.toFixed(2);

            // Activate Daily Report print area ONLY
            const dailyPrintArea = document.getElementById('print-area');
            const fifthPrintArea = document.getElementById('print-5thgear-area');
            
            dailyPrintArea.classList.add('active');
            fifthPrintArea.classList.remove('active');

            // Trigger print
            setTimeout(() => {
                window.print();
                // Cleanup after print
                setTimeout(() => {
                    dailyPrintArea.classList.remove('active');
                }, 100);
            }, 100);
        }

        // 2. Monthly Report - Similar to daily but for selected month
        function printMonthlyReport() {
            const monthInput = document.getElementById('reportMonth').value;
            if(!monthInput) {
                showToast('Please select a month first');
                return;
            }
            
            const [year, month] = monthInput.split('-');
            const monthName = new Date(year, month-1).toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            
            const monthlyRecords = records.filter(rec => {
                const recDate = new Date(rec.date);
                return recDate.getFullYear() == year && (recDate.getMonth() + 1) == month;
            });

            if(monthlyRecords.length === 0) {
                showToast('No records for selected month');
                return;
            }

            let stats = { cash: 0, card: 0, online: 0, fifthGear: 0, pending: 0, count: 0 };
            monthlyRecords.forEach(rec => {
                stats.count++;
                if(rec.payment === 'Cash') stats.cash += rec.amount;
                else if(rec.payment === 'Credit Card' || rec.payment === 'Debit Card') stats.card += rec.amount;
                else if(rec.payment === 'Online Transfer') stats.online += rec.amount;
                else if(rec.payment === '5th Gear') stats.fifthGear += rec.amount;
                else if(rec.payment === 'Pending') stats.pending += rec.amount;
            });

            // Populate using daily report template but with monthly data
            document.getElementById('print-total-cars').innerText = stats.count;
            document.getElementById('print-cash').innerText = 'AED ' + stats.cash.toFixed(2);
            document.getElementById('print-card').innerText = 'AED ' + stats.card.toFixed(2);
            document.getElementById('print-online').innerText = 'AED ' + stats.online.toFixed(2);
            document.getElementById('print-5thgear').innerText = 'AED ' + stats.fifthGear.toFixed(2);
            document.getElementById('print-pending').innerText = 'AED ' + stats.pending.toFixed(2);
            document.getElementById('print-grand-total').innerText = 'AED ' + (stats.cash + stats.card + stats.online + stats.fifthGear).toFixed(2);

            document.getElementById('print-generated').innerText = new Date().toLocaleDateString();
            document.getElementById('print-date').innerText = `Monthly Report: ${monthName}`;

            const printBody = document.getElementById('print-table-body');
            printBody.innerHTML = '';
            let total = 0;

            monthlyRecords.sort((a,b) => new Date(a.date) - new Date(b.date));

            monthlyRecords.forEach(rec => {
                total += rec.amount;
                printBody.innerHTML += `
                    <tr>
                        <td class="p-2 border border-slate-300">${rec.date}</td>
                        <td class="p-2 border border-slate-300 font-bold">${rec.plate}</td>
                        <td class="p-2 border border-slate-300">${rec.location}</td>
                        <td class="p-2 border border-slate-300">${rec.cleaner}</td>
                        <td class="p-2 border border-slate-300">${rec.payment}</td>
                        <td class="p-2 border border-slate-300 text-right">AED ${rec.amount.toFixed(2)}</td>
                    </tr>
                `;
            });

            document.getElementById('print-total').innerText = 'AED ' + total.toFixed(2);

            // Activate Daily Report print area ONLY
            const dailyPrintArea = document.getElementById('print-area');
            const fifthPrintArea = document.getElementById('print-5thgear-area');
            
            dailyPrintArea.classList.add('active');
            fifthPrintArea.classList.remove('active');

            setTimeout(() => {
                window.print();
                setTimeout(() => {
                    dailyPrintArea.classList.remove('active');
                }, 100);
            }, 100);
        }

        // 3. 5th Gear Invoice Only - Completely separate
        function print5thGearInvoiceOnly() {
            const monthInput = document.getElementById('reportMonth').value;
            if(!monthInput) {
                showToast('Please select a month first');
                return;
            }
            
            const [year, month] = monthInput.split('-');
            const monthName = new Date(year, month-1).toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            
            // Get ONLY 5th Gear records
            const fifthGearRecords = records.filter(rec => {
                const recDate = new Date(rec.date);
                return rec.payment === '5th Gear' && 
                       recDate.getFullYear() == year && 
                       (recDate.getMonth() + 1) == month;
            });

            if(fifthGearRecords.length === 0) {
                showToast('No 5th Gear records found for this month');
                return;
            }

            let totalAmount = 0;
            fifthGearRecords.forEach(rec => totalAmount += rec.amount);

            // Populate 5th Gear Invoice ONLY
            document.getElementById('print-5thgear-date').innerText = `Date: ${new Date().toLocaleDateString()}`;
            document.getElementById('print-5thgear-period').innerText = monthName;
            document.getElementById('print-5thgear-count').innerText = fifthGearRecords.length;
            document.getElementById('print-5thgear-total').innerText = 'AED ' + totalAmount.toFixed(2);

            const tbody = document.getElementById('print-5thgear-body');
            tbody.innerHTML = '';

            fifthGearRecords.sort((a,b) => new Date(a.date) - new Date(b.date));

            fifthGearRecords.forEach(rec => {
                tbody.innerHTML += `
                    <tr>
                        <td class="p-3 border border-orange-300">${rec.date}</td>
                        <td class="p-3 border border-orange-300 font-bold">${rec.plate}</td>
                        <td class="p-3 border border-orange-300 text-right font-bold">AED ${rec.amount.toFixed(2)}</td>
                    </tr>
                `;
            });

            document.getElementById('print-5thgear-table-total').innerText = 'AED ' + totalAmount.toFixed(2);

            // Activate 5th Gear print area ONLY
            const dailyPrintArea = document.getElementById('print-area');
            const fifthPrintArea = document.getElementById('print-5thgear-area');
            
            fifthPrintArea.classList.add('active');
            dailyPrintArea.classList.remove('active');

            setTimeout(() => {
                window.print();
                setTimeout(() => {
                    fifthPrintArea.classList.remove('active');
                }, 100);
            }, 100);
        }

        // Initial Render
        renderDropdowns();
        switchTab('entry');
    </script>
</body>
</html>